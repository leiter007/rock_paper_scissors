<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <script src="src/js/round.js"></script>
    <title>Rock Paper Scissors</title>
</head>

<body class="text-gray-700 text-xl font-sans font-hairline">

<header class ="p-2 bg-teal-900 w-full justify-around text-gray-100 bold border-b border-gray-600 flex">
  <div class="md:w-1/3 flex justify-center">
    <button class="font-hairline bg-teal-800 text-gray-100 hover:bg-green-900 py-2 px-4 self-center rounded" id="new_comp_game">New Game - vs Computer</button>
  </div>
  <div class="md:w-1/3 flex justify-center">
    <div class="bg-teal-900 text-gray-100 text-center p-2 text-3xl">
    WELCOME!
    </div>
  </div>
  <div class="md:w-1/3 flex justify-center">
    <button class="font-hairline bg-teal-800 text-gray-100 hover:bg-green-900 py-2 px-4 self-center rounded" id="new_one_vs_one_game">
      <a href="twoplayers.html" class="text-gray-100 no-underline">New Game - One-on-One</a>
    </button>
  </div>
</header>
<!--INSTRUCTIONS-->
<div class="bg-gray-400 text-gray-700 pt-1 pb-1 border-b-2 border-gray-400 text-xs">
  <div class="text-center">
    <a class="font-hairline">Here you can play a super exciting game of the classic</a>
    <a class="font-semibold text-xl">ROCK PAPER SCISSORS!</a>
    <p class="pt-1">
      <a class="font-hairline">Start by clicking on New Game in the header - you can play vs our smart computer who picks a draw randomly - or vs another buddy!</a>
    </p>
    <p class="pt-1">
      <a class="font-hairline">To start over and clear the stats, just press the same New Game button again!</a>
    </p>
  </div>
</div>
<!--/INSTRUCTIONS-->
<div class="p-3 pt-4 flex justify-center">
  <div class="pr-1 pt-2 w-2/3 justify-center">
    <!--GAME HEADLINE-->
    <div class="text-2xl text-center pb-1 mb-2 border-b border-gray-400">
      <p id="game_selection">GAME VS COMPUTER</p>
    </div>
    <div class="pt-2 pb-2 justify-center bg-gray-200 border-b border-gray">
      <label class="text-xl text-center block uppercase font-medium text-base text-gray-700" for="name">MAKE YOUR DRAW!</label>
  </div>
    <!--/GAME HEADLINE-->
    <!--BUTTONS-->
    <div class="bg-gray-400 flex justify-around pb-3 pt-3">
      <button class="p-1 rounded bg-gray-100 border border-gray" id="rock-btn">
        <p class="pb-1 text-base font-medium text-gray-700">ROCK!</p>
        <img src="src/img/rock.png" width="120"/>
      </button>
      <button class="p-1 rounded bg-gray-100 border border-gray" id="paper-btn">
        <p class="pb-1 text-base font-medium text-gray-700">PAPER!</p>
        <img src="src/img/paper.png" width="120"/>
      </button>
      <button class="p-1 rounded bg-gray-100 border border-gray" id="scissors-btn">
        <p class="pb-1 text-base font-medium text-gray-700">SCISSORS!</p>
        <img src="src/img/scissors.png" width="120"/>
      </button>
    </div>
    <!--/BUTTONS-->
    <!--DRAW MESSAGES-->
    <div class ="flex flex-wrap justify-center mt-2">  
      <div class="w-1/2 p-2 h-10 flex flex-wrap justify-center border-r-4 border-gray-400 border-b border-gray-400 border-t border-gray-400 self-center text-xl">
        <div class="text-center" id="player1_selection"></div>
      </div>
      <div class="w-1/2 p-2 h-10 flex flex-wrap justify-center border-b border-gray-400 border-t border-gray-400 text-xl self-center">
        <div class="text-center" id="player2_selection"></div>
      </div>
    </div>    
    <!--/DRAW MESSAGES-->
    <!--RESULT MESSAGE AND SCOREBOARD-->
      <div class="flex-wrap">
        <div class="h-12 p-2 mt-2 mb-2 border-b-2 border-teal-800 border-t-2 border-teal-800 bg-gray-200 justify-center text-center text-xl font-semibold">
          <div id="display_result">
          </div>
        </div>
      </div>
    <div id="score_board"class="pt-5 text-center">
      <p>CURRENT SCORE:</p>
    </div>   
      <div class ="flex flex-wrap justify-center mt-2">
        <div class="w-1/2 p-2 h-10 flex flex-wrap justify-center border-r-4 border-gray-400 border-b border-gray-400 border-t border-gray-400 self-center text-xl">
          <div class="text-center" id="player1_name"></div>
          <div class="text-center font-semibold" id="display_score_player1"></div>
        </div>
        <div class="w-1/2 p-2 h-10 flex flex-wrap justify-center border-b border-gray-400 border-t border-gray-400 text-xl self-center">
          <div class="text-center" id="player2_name"></div>
          <div class="text-center font-semibold" id="display_score_player2"></div>
        </div>
      </div>
      <!--/RESULT MESSAGE AND SCOREBOARD-->
    </div>
</div>
    
<script type="text/javascript">

  //HTML ELEMENTS
  const newGameBtn = document.getElementById("new_comp_game")
  const rockBtn = document.getElementById("rock-btn")
  const paperBtn = document.getElementById("paper-btn")
  const scissorsBtn = document.getElementById("scissors-btn")
  const disp_result = document.getElementById("display_result")
  const disp_player1name = document.getElementById("player1_name")
  const disp_player2name = document.getElementById("player2_name")
  const disp_player1score = document.getElementById("display_score_player1")
  const disp_player2score = document.getElementById("display_score_player2")
  const disp_player1message = document.getElementById("player1_selection")
  const disp_player2message = document.getElementById("player2_selection")

  //GLOBAL CONSTANTS
  const round = new Round
  const player1Name = round.player1_Name()
  const player2Name = round.player2_Name()
  const storage = window.sessionStorage

  //GLOBAL FUNCTIONS
  const clearStorage = () => {
    storage.clear()
    window.location.reload(true)
  }

  const showScore = () => {
    const score = Object.values(storage)
    let scorePlayer1 = score.filter(checkPlayer1Wins).length
    let scorePlayer2 = score.filter(checkPlayer2Wins).length
      
    disp_player1name.innerHTML =`${player1Name}`
    disp_player2name.innerHTML =`${player2Name}`
    disp_player1score.innerHTML = `&nbsp;:&nbsp;${scorePlayer1}`
    disp_player2score.innerHTML = `&nbsp;:&nbsp;${scorePlayer2}`
      
    if (scorePlayer1 > scorePlayer2) {
        disp_player1score.classList = "text-green-600 font-semibold"
        disp_player2score.classList = "text-red-600 font-semibold"
        disp_player1score.innerHTML = `&nbsp;:&nbsp;${scorePlayer1}`
        disp_player2score.innerHTML = `&nbsp;:&nbsp;${scorePlayer2}`

    } else if (scorePlayer1 < scorePlayer2) {
        disp_player1score.classList = "text-red-600 font-semibold"
        disp_player2score.classList = "text-green-600 font-semibold"
        disp_player1score.innerHTML = `&nbsp;:&nbsp;${scorePlayer1}`
        disp_player2score.innerHTML = `&nbsp;:&nbsp;${scorePlayer2}`
    } else {
        disp_player1score.classList = "text-gray-700 font-semibold"
        disp_player2score.classList = "text-gray-700 font-semibold"
        disp_player1score.innerHTML = `&nbsp;:&nbsp;${scorePlayer1}`
        disp_player2score.innerHTML = `&nbsp;:&nbsp;${scorePlayer2}`
    }
  }

  const checkPlayer1Wins = (string) => {return string == player1Name}
  const checkPlayer2Wins = (string) => {return string == player2Name}

  const setScore = () => {
    if (round.draw.winner == player1Name){
        storage.setItem(Date.now(), player1Name)
    } else if (round.draw.winner == player2Name){
        storage.setItem(Date.now(), player2Name)
    } else if (round.draw.winner == "Tie"){
        storage.setItem(Date.now(), "Tie")
    }
  }

  //WHEN RENDERING THE PAGE
  document.addEventListener('DOMContentLoaded', () => {

  rockBtn.addEventListener("click", () => {
    event.preventDefault();
    let draw1 = "Rock"
    round.setDraws(draw1)

    disp_player1message.innerHTML = `${player1Name} played ${round.draw.player1}`
    disp_player2message.innerHTML = `${player2Name} played ${round.draw.player2}`
    disp_result.innerHTML = `${round.calculateDraw()}`
    setScore()
    showScore()
  })

  paperBtn.addEventListener("click", () => {
    event.preventDefault();
    let draw1 = "Paper"
    round.setDraws(draw1)

    disp_player1message.innerHTML = `${player1Name} played ${round.draw.player1}`
    disp_player2message.innerHTML = `${player2Name} played ${round.draw.player2}`
    disp_result.innerHTML = `${round.calculateDraw()}`
    setScore()
    showScore()
  })

  scissorsBtn.addEventListener("click", () => {
    event.preventDefault();
    let draw1 = "Scissors"
    round.setDraws(draw1)

    disp_player1message.innerHTML = `${player1Name} played ${round.draw.player1}`
    disp_player2message.innerHTML = `${player2Name} played ${round.draw.player2}`
    disp_result.innerHTML = `${round.calculateDraw()}`
    setScore()
    showScore()
  })

  newGameBtn.addEventListener("click", () => {
    event.preventDefault();
    clearStorage()
  })
})

</script>

</body>

</html>